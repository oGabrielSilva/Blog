(()=>{"use strict";var e='\n\t<section>\n\t\t<img src="#" class="mx-auto w-75 d-block mb-5 mt-5">\n\t\t<p class="h2 mb-4 text-break">%</p>\n\t\t<p>@</p>\n\t</section>';function t(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,r=[{key:"Node",value:function(e,t){var r=document.createElement(e);if(!t)return r;var o,a=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var o=0,a=function(){};return{s:a,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw i}}}}(t);try{for(a.s();!(o=a.n()).done;){var i=o.value;r.setAttribute(i.attr,i.val)}}catch(e){a.e(e)}finally{a.f()}return r}}],null&&o(t.prototype,null),r&&o(t,r),e}();function i(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){e.preventDefault();var t,r,n=e.target,o=!(!(t=function(e){var t=e,r=[];for(var n in t)if(t[n].value.length<=0||"string"!=typeof t[n].value){r.push("Algum item foi mal digitado"),t=null;break}return{items:t,errors:r}}(function(e){if(Array.isArray(e))return l(e)}(r=n.querySelectorAll("input"))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||i(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).items||0!==t.errors.length)||t.errors;!0===o?e.target.submit():console.log(o)};function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.body=t,this.errors=[],this.content=null}var t,r;return t=e,(r=[{key:"gap",value:function(){for(var e in this.body)"INPUT"===this.body[e].nodeName?this.cleanInp(e):"TEXTAREA"===this.body[e].nodeName&&this.cleanTex(e);if(!(this.errors.length>0))return this.body&&this.errors.length<1?this.content=!0:void 0;this.body=null}},{key:"replacing",value:function(){var e=this;for(var t in this.body)if("TEXTAREA"===this.body[t].nodeName){var r=function(){e.body[t].value=e.body[t].value.replace(/script/gi,'<span style="background: #000; color: #500">censored</span>');var r=e.body[t].value.match(/(https?:\/\/[^\s]+)/g);if(!r)return{v:void 0};for(var n in r=r.filter((function(e,t){return r.indexOf(e)===t}))){var o=new RegExp(r[n],"g");e.body[t].value=e.body[t].value.replace(o,'<a target="_blank" href="'.concat(r[n],'">').concat(r[n],"</a>"))}}();if("object"===u(r))return r.v}}},{key:"cleanInp",value:function(e){this.body[e].value.length>100&&this.errors.push("".concat(this.body[e].getAttribute("name")," está irregular")),"string"!=typeof this.body[e].value&&this.errors.push("falha no sistema, input irregular"),this.body[e].value.length<5&&this.errors.push("input ".concat(this.body[e].getAttribute("name")," está incompleto/pequeno"))}},{key:"cleanTex",value:function(e){this.body[e].value.length<400&&"ending"!==this.body[e].getAttribute("id")&&this.errors.push("".concat(this.body[e].getAttribute("name")," está incompleto")),"string"!=typeof this.body[e].value&&this.errors.push("falha no sistema, textarea irregular"),"ending"===this.body[e].getAttribute("id")&&this.body[e].value.length<100&&this.errors.push("ending pequena demais")}}])&&d(t.prototype,r),e}();function f(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=document.querySelector("#render-article"),v=0;function h(){var e=y.querySelector("#contents").querySelectorAll("textarea"),t=y.querySelector("#contents").querySelectorAll("input"),r=new s(f(t).concat(f(e)));return r.gap(),r.errors.length>0?(y.querySelector("#danger-help").innerText=r.errors.join("; "),setTimeout((function(){return y.querySelector("#add").classList.remove("bg-danger")}),5e3),y.querySelector("#add").classList.add("bg-danger"),!1):(y.querySelector("#add").classList.remove("bg-danger"),y.querySelector("#danger-help").innerText=r.errors.join("; "),y.querySelector("#add").classList.add("bg-success"),!0)}var b=io(),g=document.querySelector("#home-header"),S=document.querySelector("form"),A=document.querySelector("#_id"),q=document.querySelector("#system-edition");g&&(b.emit("req-articles"),b.on("re-articles",(function(e){var r=[];e.forEach((function(e){var t=e.title,n=e.description,o=e.primary,a=e.createdAt,i=e._id;r.push({title:t,description:n,primary:o,createdAt:a,_id:i})})),function(e,r){var n=document.querySelector("#row"),o=document.querySelector("#featured"),a=[];if(e.forEach((function(e){a.length<1&&a.push(e),e._id>a[0]._id&&(a[0]=e)})),!0===function(e,t){return e.children[0].querySelector("img").setAttribute("src",t[0].primary),e.children[0].querySelector(".card-title").innerText=t[0].title,e.children[0].querySelector(".card-text").innerText=t[0].description,e.children[0].querySelector("a").setAttribute("href","/post=".concat(t[0]._id)),!0}(n,a)){var i=t(n.children[1].querySelectorAll(".col-sm-6")).concat(t(o.querySelectorAll(".card"))),l=0;i.forEach((function(t){if(l>=e.length&&(l=0),e[l]===a[0]&&(l+=1),t.querySelector(".card-title").innerText=e[l].title,t.querySelector(".card-text").innerText=e[l].description,t.querySelector("a").setAttribute("href","/post=".concat(e[l]._id)),t.querySelector("small")){var r=new Date(e[l].createdAt);t.querySelector("small").innerText=moment(r,"YYYYMMDD").fromNow()}l+=1}))}}(r)}))),S&&"render-article"!==S.getAttribute("id")?function(){var e,t=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=i(e))){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,a=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw a}}}}(document.querySelectorAll("form"));try{for(t.s();!(e=t.n()).done;)e.value.addEventListener("submit",c)}catch(e){t.e(e)}finally{t.f()}}():S&&"render-article"===S.getAttribute("id")&&(y.querySelector("#add").addEventListener("click",h),y.querySelector("#plus").addEventListener("click",(function(e){if(e.preventDefault(),5===v)return y.querySelector("#plus").setAttribute("class","nav-link disabled");if(confirm('Será criado um novo parágrafo. Clique em "OK" para confirmar.')){v+=1;var t=y.querySelector("#paragraph"),r=document.createElement("div");r.innerHTML+='\n<div class="row mt-5">\n\t<div class="col-md-6">\n\t\t<div class="form-group">\n\t\t\t<input autocomplete="off" aria-describedby="Título do Parágrafo 2" \n\t\t\trequired="" name="h2" id="h2" type="text" class="form-control mb-2" \n\t\t\tplaceholder="Desenvolvimento - Subtítulo" maxlength="70">\n\t\t</div>\n\t</div>\n\t<div class="col-md-6">\n\t\t<div class="form-group">\n\t\t\t<input autocomplete="off" aria-describedby="Link para imagem" name="img" \n\t\t\ttype="text" class="form-control mb-2" placeholder="Link para imagem" id="img" \n\t\t\tmaxlength="100">\n\t\t</div>\n\t</div>\n</div>\n<div class="form-floating">\n\t<textarea minlength="400" required="" style="height: 300px;" class="form-control" placeholder="Leave a comment here" id="development" name="development"></textarea>\n\t<label for="development">Desenvolvimento</label>\n</div>',r.innerHTML=r.innerHTML.replace(/development/g,"development"+String(v)),r.innerHTML=r.innerHTML.replace(/h2/g,"h2"+String(v)),r.innerHTML=r.innerHTML.replace(/img/g,"img"+String(v)),t.innerHTML+=r.innerHTML,setTimeout((function(){return t.querySelector("#h2".concat(String(v))).focus()}),300)}})),y.addEventListener("submit",(function(e){e.preventDefault();var t=h(),r=function(e){var t,r=function(e){for(var t in e){if(""===e[t].value)return e[t].focus();"string"!=typeof e[t].value||e[t].value.length>100?(e[t].focus(),e[t]=null):"primary"===e[t].getAttribute("name")&&(e[t].value.startsWith("https://")||(e[t].focus(),e[t]=null))}return e}(f(e.querySelectorAll("input"))),n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=p(e))){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw a}}}}(r);try{for(n.s();!(t=n.n()).done;)if(null===t.value)return null}catch(e){n.e(e)}finally{n.f()}return r}(e.target);if(t&&r){var n=y.querySelector("#contents").querySelectorAll("textarea"),o=y.querySelector("#contents").querySelectorAll("input");return new s(f(o).concat(f(n))).replacing(),e.target.submit()}y.querySelector("button").classList.add("bg-danger"),setTimeout((function(){return y.querySelector("button").classList.remove("bg-danger")}),5e3)}))),A&&A.value===window.location.pathname.split("=")[1]&&function(t){var r=window.location.pathname.split("=")[1];t.emit("search",r),t.on("re-article-by-id",(function(t){return function(t,r){var n=document.querySelector("main");if(r===t._id){for(var o="",a=t.h21,i=t.h22,l=t.h23,c=t.h24,u=t.h25,d=t.h3,s=t.img1,f=t.img2,p=t.img3,m=t.img4,y=t.img5,v=t.development1,h=t.development2,b=t.development3,g=t.development4,S=t.development5,A=t.ending,q=0,w=[[a,s,v],[i,f,h],[l,p,b],[c,m,g],[u,y,S]];q<w.length;q++){var T=w[q];if(T[0]||T[2]){var x=e.replace(/\#/g,T[1]);x=(x=x.replace(/\%/g,T[0])).replace(/\@/g,T[2]),o+=x}}var C=e.replace(/\%/g,d);C=(C=C.replace(/\@/g,A)).replace('<img src="#" class="mx-auto w-75 d-block mb-5 mt-5">',""),o+=C,n.querySelector("#read-more").addEventListener("click",(function(e){e.preventDefault(),e.target.parentElement.parentElement.remove(),n.innerHTML+=o}))}}(t,r)}))}(b),q&&function(e,t){e.addEventListener("click",(function(e){return function(e,t){e.preventDefault();var r=document.querySelector("main");return e.target.classList.add("disabled"),e.target.innerText="Carregando",function(e,t){var r=function(){var e=a.Node("section",[{attr:"class",val:"mb-5"}]),t=a.Node("form",[{attr:"id",val:"form-edit-panel"},{attr:"class",val:"row mb-3"}]),r=function(){return a.Node("div",[{attr:"class",val:"col-sm-6"}])},n=function(){return a.Node("div",[{attr:"class",val:"form-group"}])},o=function(e){return a.Node("label",[{attr:"for",val:e},{attr:"class",val:"mt-4 mb-1"}])},i=function(e){return a.Node("input",[{attr:"autocomplete",val:"off"},{attr:"type",val:"text"},{attr:"class",val:"form-control"},{attr:"id",val:e},{attr:"placeholder",val:e}])},l=n(),c=n(),u=r(),d=r(),s=o("title"),f=o("id"),p=a.Node("p",[{attr:"class",val:"h4 mb-3 mt-3"}]),m=a.Node("a",[{attr:"class",val:"text-decoration-underline fw-light"},{attr:"href",val:"/system"}]);return m.innerText="Voltar",f.innerText="Por ID",s.innerText="Por título",l.appendChild(s),l.appendChild(i("title")),c.appendChild(f),c.appendChild(i("id")),u.appendChild(l),d.appendChild(c),t.appendChild(u),t.appendChild(d),p.innerText="Pesquise o post que quer editar por título ou id:",e.appendChild(m),e.appendChild(p),e.appendChild(t),e}(),n=a.Node("div",[{attr:"class",val:"row row-cols-1 row-cols-md-3 g-4"}]),o=a.Node("p",[{attr:"class",val:"h4 mb-3"}]);o.innerText="Veja os últimos posts";var i=[];e.emit("req-articles"),e.on("re-articles",(function(e){return e.forEach((function(e){var t=e.title,r=e.description,n=e.primary,o=e.createdAt,a=e._id;i.push({title:t,description:r,primary:n,_id:a,createdAt:o})})),i.forEach((function(e){var t=function(e){var t,r=e.title,n=e.primary,o=e.description,i=e._id,l=e.createdAt,c=function(e){return a.Node("div",[{attr:"class",val:e}])},u=function(){return a.Node("small",[{attr:"class",val:"text-muted"}])},d=c("col"),s=c("card h-100"),f=(t=n,a.Node("img",[{attr:"src",val:t},{attr:"class",val:"card-img-top"}])),p=c("card-body"),m=a.Node("h5",[{attr:"class",val:"card-title"}]),y=a.Node("p",[{attr:"class",val:"card-text"}]),v=u(),h=function(e){return a.Node("a",[{attr:"href",val:e},{attr:"target",val:"_blank"},{attr:"class",val:"btn btn-danger"}])}("/".concat(i)),b=c("");h.innerText="Acessar",b.appendChild(h);var g=c("card-footer"),S=u();return m.innerText=r,y.innerText=o,v.innerText="ID: ".concat(i),S.innerText="Last update ".concat(moment(l,"YYYYMMDD").fromNow()),p.appendChild(m),p.appendChild(y),p.appendChild(v),p.appendChild(b),g.appendChild(S),s.appendChild(f),s.appendChild(p),s.appendChild(g),d.appendChild(s),d}(e);n.appendChild(t)})),document.querySelector("section").appendChild(r),document.querySelector("section").appendChild(o),document.querySelector("section").appendChild(n),t.classList.toggle("d-none")}))}(t,r)}(e,t)}))}(q,b)})();
//# sourceMappingURL=bundle.js.map