{"version":3,"file":"bundle.js","mappings":"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","sources":["webpack://projeto_blog/./frontend/modules/staff/index.js","webpack://projeto_blog/./frontend/modules/renderArticle/Article/index.js","webpack://projeto_blog/./frontend/modules/renderArticle/index.js","webpack://projeto_blog/./frontend/main.js","webpack://projeto_blog/./frontend/modules/homeHeader/index.js"],"sourcesContent":["function cleanUp(inputs) {\n\tlet items = inputs;\n\tconst errors = [];\n\tfor(let item in items) {\n\t\tif((items[item].value.length <= 0) \n\t\t\t|| (typeof items[item].value !== 'string') \n\t\t\t|| (items[item].getAttribute(name) !== '_csrf' && items[item].value.length > 50)) \n\t\t{\n\t\t\terrors.push(`Algum item foi mal digitado`);\n\t\t\titems = null;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn { items, errors };\n}\n\nconst fun = e => {\n\te.preventDefault();\n\tconst { target } = e;\n\tconst filterInputs = funValidator([...target.querySelectorAll('input')]);\n\tfilterInputs === true ? e.target.submit() : window.location.href = '/';\n\treturn;\n};\n\nexport default function funStaff() {\n\tconst forms = document.querySelectorAll('form');\n\tfor(let form of forms) {\n\t\tform.addEventListener('submit', fun);\n\t};\n};\n\nfunction funValidator(inputs) {\n\tconst activeIp = cleanUp(inputs);\n\tif(activeIp.items && activeIp.errors.length === 0) return true;\n\treturn null;\n}","export default class Article {\n\tconstructor(body) {\n\t\tthis.body = body;\n\t\tthis.errors = [];\n\t\tthis.content = null;\n\t}\n\n\tgap() {\n\t\tfor(let i in this.body) {\n\t\t\tif(this.body[i].nodeName === 'INPUT') this.cleanInp(i);\n\t\t\telse if(this.body[i].nodeName === 'TEXTAREA') this.cleanTex(i);\n\t\t};\n\n\t\tif(this.errors.length > 0) {\n\t\t\tthis.body = null;\n\t\t\treturn;\n\t\t}\n\n\t\tif(this.body && this.errors.length < 1) return this.content = true;\n\t}\n\n\treplacing() {\n\t\tfor(let i in this.body) {\n\t\t\tif(this.body[i].nodeName === 'TEXTAREA') {\n\t\t\t\tthis.body[i].value = this.body[i].value.replace(/script/ig, \n\t\t\t\t\t'<span style=\"background: #000; color: #500\">censored</span>');\n\n\t\t\t\tlet urls = this.body[i].value.match(/(https?:\\/\\/[^\\s]+)/g);\n\t\t\t\tif(!urls) return;\n\t\t\t\turls = urls.filter((elm, i) => urls.indexOf(elm) === i);\n\t\t\t\tfor (let url in urls) {\n\t\t\t\t\tconst rgx = new RegExp(urls[url], 'g');\n\t\t\t\t\tthis.body[i].value = this.body[i].value.replace(rgx, `<a target=\"_blank\" href=\"${urls[url]}\">${urls[url]}</a>`);\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t}\n\n\tcleanInp(i) {\n\t\tif(this.body[i].value.length > 100) this.errors.push(`${this.body[i].getAttribute('name')} está irregular`);\n\t\tif(typeof this.body[i].value !== 'string') this.errors.push('falha no sistema, input irregular');\n\t\tif(this.body[i].value.length < 5) this.errors.push(`input ${this.body[i].getAttribute('name')} está incompleto/pequeno`);\n\t}\n\n\tcleanTex(i) {\n\t\tif(this.body[i].value.length < 400 && this.body[i].getAttribute('id') !== 'ending') \n\t\t\tthis.errors.push(`${this.body[i].getAttribute('name')} está incompleto`);\n\t\tif(typeof this.body[i].value !== 'string') \n\t\t\tthis.errors.push('falha no sistema, textarea irregular');\n\t\tif(this.body[i].getAttribute('id') === 'ending' && \n\t\t\tthis.body[i].value.length < 100) this.errors.push('ending pequena demais');\n\t}\n};\n","import Article from './Article';\n\nconst main = document.querySelector('#render-article');\nlet index = 0;\nlet copy = null;\n\nfunction valid() {\n\tconst texts = main.querySelector('#contents').querySelectorAll('textarea');\n\tconst inputs = main.querySelector('#contents').querySelectorAll('input');\n\tconst article = new Article([...inputs].concat([...texts]));\n\tarticle.gap();\n\n\tif(article.errors.length > 0) {\n\t\tmain.querySelector('#danger-help').innerText = article.errors.join('; ');\n\t\tsetTimeout(() => main.querySelector('#add').classList.remove('bg-danger'), 5000);\n\t\tmain.querySelector('#add').classList.add('bg-danger');\n\t\treturn false;\n\t} else {\n\t\tmain.querySelector('#add').classList.remove('bg-danger');\n\t\tmain.querySelector('#danger-help').innerText = article.errors.join('; ');\n\t\tmain.querySelector('#add').classList.add('bg-success');\n\t\treturn true;\n\t}\n}\n\nfunction cleanUp(inp) {\n\tfor(let i in inp) {\n\t\tif(inp[i].value === '') return inp[i].focus();\n\t\tif((typeof inp[i].value !== 'string') || (inp[i].value.length > 100)) {\n\t\t\tinp[i].focus();\n\t\t\tinp[i] = null;\n\t\t\tcontinue;\n\t\t};\n\t\tif(inp[i].getAttribute('name') === 'primary') {\n\t\t\tif(!inp[i].value.startsWith('https://')) {\n\t\t\t\tinp[i].focus();\n\t\t\t\tinp[i] = null;\n\t\t\t} \n\t\t};\n\t}\n\treturn inp;\n}\n\nfunction validFun(target) {\n\tconst inputs = cleanUp([...target.querySelectorAll('input')]);\n\tfor(let input of inputs) {\n\t\tif(input === null) return null;\n\t}\n\treturn inputs;\n}\n\nconst fun = e => {\n\te.preventDefault();\n\tconst val = valid();\n\tconst preventProcess = validFun(e.target);\n\tif(val && preventProcess) {\n\t\tconst texts = main.querySelector('#contents').querySelectorAll('textarea');\n\t\tconst inputs = main.querySelector('#contents').querySelectorAll('input');\n\t\tconst article = new Article([...inputs].concat([...texts]));\n\t\tarticle.replacing();\n\t\tsetTimeout(() => console.log('Oi'), 6000);\n\t\treturn e.target.submit();\n\t} \n\tmain.querySelector('button').classList.add('bg-danger')\n\tsetTimeout(() => main.querySelector('button').classList.remove('bg-danger'), 5000);\n}\n\nexport default function funRenderArticle() {\n\tmain.querySelector('#add').addEventListener('click', valid);\n\tmain.querySelector('#plus').addEventListener('click', e => {\n\t\te.preventDefault();\n\t\tindex += 1;\n\t\tconst container = main.querySelector('#paragraph');\n\t\tconst headers = document.createElement('div');\n\t\tif(!copy) copy = container.querySelector('.row').parentElement.innerHTML;\n\t\theaders.innerHTML += copy;\n\t\theaders.innerHTML = headers.innerHTML.replace(/development/g, 'development' + String(index));\n\t\theaders.innerHTML = headers.innerHTML.replace(/h2/g, 'h2' + String(index));\n\t\theaders.innerHTML = headers.innerHTML.replace(/img/g, 'img' + String(index));\n\t\tcontainer.innerHTML += headers.innerHTML;\n\t});\n\n\tmain.addEventListener('submit', fun);\n};\n","import { funHomeHeader, funSetFeatured } from './modules/homeHeader';\nimport funStaff from './modules/staff';\nimport funRenderArticle from './modules/renderArticle';\n\nconst socket = io();\nconst homeHeader = document.querySelector('#home-header');\nconst form = document.querySelector('form');\n\nif(homeHeader) { \n\tsocket.emit('req-articles');\n\tsocket.on('re-articles', elms => {\n\t\tconst elmts = [];\n\t\telms.forEach(elm => {\n\t\t\tconst { title, description, primary, createdAt, _id  } = elm;\n\t\t\telmts.push({ title, description, primary, createdAt, _id });\n\t\t});\n\n\t\tfunHomeHeader(elmts, homeHeader);\n\t});\n};\n\nif(form && !(form.getAttribute('id') === 'render-article')) funStaff();\nelse if(form.getAttribute('id') === 'render-article') funRenderArticle();\n","export function funHomeHeader(elms, homeHeader) {\n\tconst row = document.querySelector('.row');\n\tconst featured = document.querySelector('#featured');\n\tconst lastPost = [];\n\n\telms.forEach(elm => {\n\t\tif(lastPost.length < 1) return lastPost.push(elm);\n\t\tif(elm.createdAt < lastPost[0]) return lastPost[0] = elm;\n\t});\n\t\n\tconst sync = setLastPost(row, lastPost);\n\tif(sync === true) {\n\t\tconst childrens = [...row.children[1].querySelectorAll('.col-sm-6')]\n\t\t\t.concat([...featured.querySelectorAll('.card')]);\n\n\t\tlet index = 0;\n\t\tchildrens.forEach(elm => {\n\t\t\tif(index >= elms.length) index = 0;\n\t\t\telm.querySelector('.card-title').innerText = elms[index].title;\n\t\t\telm.querySelector('.card-text').innerText = elms[index].description;\n\t\t\telm.querySelector('a').setAttribute('href', `/post/${elms[index]._id}`);\n\t\t\tindex += 1;\n\t\t});\n\t};\n};\n\nexport function funSetFeatured(elms) {\n\tconst featured = document.querySelector('#featured');\n\tif(!featured) return false;\n}\n\nfunction setLastPost(row, lastPost) {\n\trow.children[0].querySelector('img').setAttribute('src', lastPost[0].primary)\n\trow.children[0].querySelector('.card-title').innerText = lastPost[0].title;\n\trow.children[0].querySelector('.card-text').innerText = lastPost[0].description;\n\trow.children[0].querySelector('a').setAttribute('href', `/post/${lastPost[0]._id}`);\n\treturn true;\n};\n"],"names":["fun","e","preventDefault","activeIp","target","inputs","items","errors","item","value","length","getAttribute","name","push","cleanUp","querySelectorAll","submit","window","location","href","Article","body","this","content","i","nodeName","cleanInp","cleanTex","replace","urls","match","url","filter","elm","indexOf","rgx","RegExp","main","document","querySelector","index","copy","valid","texts","article","concat","gap","innerText","join","setTimeout","classList","remove","add","socket","io","homeHeader","form","emit","on","elms","elmts","forEach","title","description","primary","createdAt","_id","row","featured","lastPost","children","setAttribute","setLastPost","childrens","funHomeHeader","addEventListener","funStaff","container","headers","createElement","parentElement","innerHTML","String","val","preventProcess","inp","focus","startsWith","validFun","replacing","console","log"],"sourceRoot":""}